# Chris

A personal coding project workflow manager. Takes software ideas from first thought to shipped code through a structured, repeatable process — managing git, spawning agents, and coordinating across multiple repos.

```
/wf-new → /wf-prd → /wf-spec → /wf-tasks → /wf-build → /wf-review → /wf-done
```

Works from the Claude CLI at your desk. Accessible from your phone via OpenClaw + WhatsApp.

---

## What Chris Does

- **Workflow stages** — each step produces a document that feeds the next: PRD → Spec → Tasks → Build → Review → Done
- **Multi-repo projects** — a single project can span multiple codebases; Chris coordinates them all
- **Git management** — creates branches, sets up worktrees for concurrent projects, commits in conventional style, opens draft PRs
- **Agent orchestration** — spawns background agents (via OpenClaw) or local Claude sessions to do the actual building
- **Mobile access** — full workflow control from WhatsApp via the OpenClaw skill
- **Self-hosting** — Chris manages its own development through the same workflow

---

## Concepts

**Project** — a unit of work, defined by a PRD. Not 1:1 with a repo. One project can touch many repos. Metadata lives in `~/Code/chris/projects/<slug>/`.

**Repo** — source code at `~/Code/<repo-name>/`. Has a `AGENTS.md` that any agent loads at session start for instant context. One repo can be part of many concurrent projects.

---

## Directory Structure

```
~/Code/
├── .chris-worktrees/           ← isolated checkouts for concurrent projects
│   └── <project-slug>/
│       └── <repo-name>/
│
├── chris/                      ← this repo (public tool)
│   ├── AGENTS.md       ← Chris's own repo context
│   ├── skills/                 ← /wf-* skill source files
│   ├── templates/              ← blank doc templates
│   ├── README.md
│   └── GUIDE.md
│
├── chris/projects/             ← private git repo (your personal project data)
│   └── <project-slug>/
│       ├── PRD.md
│       ├── SPEC.md
│       ├── TASKS.md
│       ├── status.json
│       ├── research/
│       └── release/            ← generated by /wf-done
│
└── <repo-name>/                ← your code repos (siblings of chris/)
    └── AGENTS.md
```

---

## Workflow Skills

Each `/wf-*` command is a Claude CLI slash command, available in any session.

| Command | What it does |
|---------|-------------|
| `/wf-new [name]` | Create a new project. Optionally scaffold a new repo. |
| `/wf-prd` | Write a Product Requirements Document interactively. |
| `/wf-spec` | Generate a technical spec from the PRD. |
| `/wf-tasks` | Break the spec into ordered tasks. Identify repos. Set up branches. |
| `/wf-build` | Spawn an agent for the next task. Manages git, loads context. |
| `/wf-review` | Review diff vs spec + tasks. On pass: push + open draft PR. |
| `/wf-done` | Close project: generate release artifacts, clean up git, archive. |
| `/wf-status` | Show all projects and their current stage. |
| `/wf-research [topic]` | Research a topic at any stage. Saves findings to project. |

---

## Setup

### 1. Clone this repo

```bash
git clone https://github.com/<your-username>/chris ~/Code/chris
```

### 2. Install skills globally

Symlink all skill files into `~/.claude/commands/` so they're available in every Claude session:

```bash
for skill in ~/Code/chris/skills/*/SKILL.md; do
  name=$(basename $(dirname $skill))
  ln -sf "$skill" ~/.claude/commands/${name}.md
done
```

Edits to `~/Code/chris/skills/*/SKILL.md` take effect immediately — no reinstall needed.

### 3. Initialise Chris

Open any Claude session and run:

```
/wf-init
```

This creates the `projects/` directory, sets up the meta-projects, and verifies your `gh` CLI auth.

### 4. Set up the private projects repo *(manual step)*

Your `projects/` directory contains all your personal project data — PRDs, specs, tasks, research. It should be a separate private GitHub repo:

```bash
cd ~/Code/chris/projects
git init
git add .
git commit -m "chore: init projects repo"
gh repo create chris-projects --private --source=. --push
```

Or create the repo on GitHub first and then:

```bash
git remote add origin git@github.com:<your-username>/chris-projects.git
git push -u origin main
```

This repo is excluded from the public `chris/` repo via `.gitignore`.

### 5. Install the OpenClaw skill *(for mobile access)*

See [OpenClaw Integration](#openclaw-integration) below.

---

## AGENTS.md — Repo Briefs

Every repo you work in should have a `AGENTS.md`. This is what agents read when they start a session in that repo — no more re-explaining the codebase.

```yaml
---
name: My API
slug: my-api
repo: ~/Code/my-api
stack: [TypeScript, Bun]
stage: build
install_cmd: bun install
default_branch: main
---

## Purpose
What this repo does and why.

## Current Focus
What's being worked on right now.

## Conventions
Key patterns to follow.

## Key Files
- src/index.ts — entry point

## Open Questions
- 
```

`/wf-new` creates this file for new repos. For existing repos, copy from `~/Code/chris/templates/AGENTS.md` and fill it in.

---

## Git Conventions

Chris manages git throughout the workflow:

- **One branch per project**: `chris/<project-slug>` (e.g., `chris/auth-overhaul`)
- **Commits**: conventional style — `feat:`, `fix:`, `docs:`, `chore:`, `refactor:`
- **Concurrent projects**: if two projects touch the same repo, git worktrees keep them isolated
- **PRs**: draft PRs opened automatically by `/wf-review` when it passes

---

## OpenClaw Integration

Chris integrates with [OpenClaw](https://openclaw.ai) to give you full workflow control from your phone via WhatsApp.

### Install the OpenClaw skill

Copy or symlink the Chris skill into your OpenClaw workspace:

```bash
cp ~/Code/chris/skills/openclaw/SKILL.md ~/.openclaw/workspace/skills/chris/SKILL.md
```

Or follow the OpenClaw skill installation docs at https://docs.openclaw.ai.

### What you can do from WhatsApp

Once the skill is installed, you can manage any project stage by messaging your OpenClaw instance:

| Message | What happens |
|---------|-------------|
| "What's the status of my projects?" | Lists all projects and their current stage |
| "Start a new project called auth-overhaul" | Creates the project in Chris |
| "Write the spec for mobile-onboarding" | Spawns an agent to run `/wf-spec` |
| "Break mobile-onboarding into tasks" | Runs `/wf-tasks` |
| "Kick off the build on api-refactor" | Spawns a build agent |
| "Review api-refactor" | Runs `/wf-review`, opens draft PR if it passes |
| "Close out api-refactor" | Runs `/wf-done`, generates release docs |
| "Research GraphQL vs REST for mobile-onboarding" | Runs `/wf-research` |
| "Any conflicts?" | Lists all active cross-project conflicts |

### How agents are spawned

When you trigger a workflow stage from WhatsApp, OpenClaw spawns a background subagent that:
1. Reads the relevant `status.json` and project metadata
2. Loads the appropriate `AGENTS.md` for each involved repo
3. Runs the workflow stage (same as if you typed `/wf-spec` in Claude CLI)
4. Reports back when done (or when it needs input)

You get a WhatsApp message when the agent finishes — or if it hits a conflict or needs a decision.

---

## Multiple Concurrent Projects

Chris is designed for running several projects at once. If two projects both touch the same repo, it automatically uses git worktrees to keep them isolated:

```
~/Code/.chris-worktrees/
  auth-overhaul/
    api/          ← branch: chris/auth-overhaul
  mobile-v2/
    api/          ← branch: chris/mobile-v2
    mobile-app/   ← branch: chris/mobile-v2
```

If the projects overlap on the same files, Chris notifies you immediately and flags the risk at review time — but doesn't stop work.

---

## Meta-Projects

Chris eats its own cooking:

- `projects/chris/` — tracks Chris's own development (PRD, SPEC, TASKS, releases)
- `projects/workflow-improvements/` — a low-friction notebook for anything that feels clunky or could be better

---

## Full Docs

- `GUIDE.md` — detailed walkthrough of every workflow stage
- `projects/chris/PRD.md` — why Chris exists and what it's designed to do
- `projects/chris/SPEC.md` — full technical specification
